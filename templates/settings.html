{% extends "base.html" %}

{% block title %}Settings - Trading Dashboard{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <h1 class="mb-4">Settings</h1>
        
        <!-- Initial Investment Settings -->
        <div class="card mb-4">
            <div class="card-header">
                Initial Investment Settings
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('settings') }}">
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="btc_initial" class="form-label">BTC Initial Investment (USDT)</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="btc_initial" name="btc_initial" 
                                           value="{{ investments.BTC }}" step="0.01" min="0" required>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="eth_initial" class="form-label">ETH Initial Investment (USDT)</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="eth_initial" name="eth_initial" 
                                           value="{{ investments.ETH }}" step="0.01" min="0" required>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="sol_initial" class="form-label">SOL Initial Investment (USDT)</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="sol_initial" name="sol_initial" 
                                           value="{{ investments.SOL }}" step="0.01" min="0" required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> 
                        These values are used to calculate profit/loss percentages. They represent your initial investment in each cryptocurrency.
                    </div>
                    <button type="submit" class="btn btn-primary">Save Settings</button>
                </form>
            </div>
        </div>
        
        <!-- API Configuration Card -->
        <div class="card mb-4">
            <div class="card-header">
                API Configuration Status
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>API Key Status</th>
                                <th>Secret Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>BTC</td>
                                <td>
                                    {% if 'BTC' in api_config.bybit_api and api_config.bybit_api.BTC.key != 'your-btc-api-key' %}
                                        <span class="badge bg-success">Configured</span>
                                    {% else %}
                                        <span class="badge bg-danger">Not Configured</span>
                                    {% endif %}
                                </td>
                                <td>
                                    {% if 'BTC' in api_config.bybit_api and api_config.bybit_api.BTC.secret != 'your-btc-api-secret' %}
                                        <span class="badge bg-success">Configured</span>
                                    {% else %}
                                        <span class="badge bg-danger">Not Configured</span>
                                    {% endif %}
                                </td>
                            </tr>
                            <tr>
                                <td>ETH</td>
                                <td>
                                    {% if 'ETH' in api_config.bybit_api and api_config.bybit_api.ETH.key != 'your-eth-api-key' %}
                                        <span class="badge bg-success">Configured</span>
                                    {% else %}
                                        <span class="badge bg-danger">Not Configured</span>
                                    {% endif %}
                                </td>
                                <td>
                                    {% if 'ETH' in api_config.bybit_api and api_config.bybit_api.ETH.secret != 'your-eth-api-secret' %}
                                        <span class="badge bg-success">Configured</span>
                                    {% else %}
                                        <span class="badge bg-danger">Not Configured</span>
                                    {% endif %}
                                </td>
                            </tr>
                            <tr>
                                <td>SOL</td>
                                <td>
                                    {% if 'SOL' in api_config.bybit_api and api_config.bybit_api.SOL.key != 'your-sol-api-key' %}
                                        <span class="badge bg-success">Configured</span>
                                    {% else %}
                                        <span class="badge bg-danger">Not Configured</span>
                                    {% endif %}
                                </td>
                                <td>
                                    {% if 'SOL' in api_config.bybit_api and api_config.bybit_api.SOL.secret != 'your-sol-api-secret' %}
                                        <span class="badge bg-success">Configured</span>
                                    {% else %}
                                        <span class="badge bg-danger">Not Configured</span>
                                    {% endif %}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="alert alert-warning">
                    <i class="bi bi-exclamation-triangle"></i>
                    API keys are managed through configuration files and cannot be changed through this interface for security reasons.
                </div>
            </div>
        </div>
        
        <!-- Database Configuration Card -->
        <div class="card">
            <div class="card-header">
                Database Configuration Status
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <tbody>
                            <tr>
                                <th>Host</th>
                                <td>{{ db_config.host }}</td>
                            </tr>
                            <tr>
                                <th>Database</th>
                                <td>{{ db_config.database }}</td>
                            </tr>
                            <tr>
                                <th>User</th>
                                <td>{{ db_config.user }}</td>
                            </tr>
                            <tr>
                                <th>Port</th>
                                <td>{{ db_config.port }}</td>
                            </tr>
                            <tr>
                                <th>Connection Status</th>
                                <td>
                                    <span class="badge bg-success">Connected</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="alert alert-warning">
                    <i class="bi bi-exclamation-triangle"></i>
                    Database configuration is managed through configuration files and cannot be changed through this interface for security reasons.
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
